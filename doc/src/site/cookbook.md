# Cookbook

![](toctree:local=true,mergeFirst=true)

## How to use a custom webpack configuration file? {#custom-config}

First, configure the `webpackConfigFile` setting to refer to your configuration file:

~~~ scala
webpackConfigFile in fastOptJS := Some(baseDirectory.value / "my.custom.webpack.config.js")
~~~

Or, if you want to use the same configuration file for both `fastOptJS` and `fullOptJS`:

~~~ scala
webpackConfigFile := Some(baseDirectory.value / "my.custom.webpack.config.js")
~~~

Then, you can write your configuration in file `my.custom.webpack.config.js`.
We recommend that you reuse the configuration file generated by scalajs-bundler
and extend it, rather than writing a configuration file from scratch.

You can do so as follows:

~~~ javascript
var webpack = require('webpack');

module.exports = require('./scalajs.webpack.config');

// And then modify `module.exports` to extend the configuration
~~~

The key part is the `require('./scalajs.webpack.config')`. It loads the configuration
file generated by scalajs-bundler so that you can tweak it. It works because your configuration
file will be copied into the internal target directory, where the scalajs-bundler generates
its configuration file, and where all the npm dependencies have been downloaded (so you can
also `require` these dependencies).

You can find a working example of custom configuration file
[here](https://github.com/scalacenter/scalajs-bundler/blob/master/sbt-scalajs-bundler/src/sbt-test/sbt-scalajs-bundler/static/prod.webpack.config.js).

## How to publish a facade for an npm module? {#facade}

Create a project for the facade and enable the `ScalaJSBundlerPlugin` plugin on its `build.sbt`:

~~~ scala
enablePlugins(ScalaJSBundlerPlugin)
~~~

Add a dependency on the npm package you are interested in:

~~~ scala
npmDependencies in Compile += "foo" -> "1.0"
~~~

Define facade interfaces for the npm modules you are interested in, as explained in the Scala.js
[documentation](https://www.scala-js.org/doc/interoperability/facade-types.html). Be sure to add the
[`@JSImport`](https://www.scala-js.org/doc/interoperability/facade-types.html#a-nameimporta-imports-from-other-javascript-modules)
annotation on the modules:

~~~ scala
import scala.scalajs.js
import import scala.scalajs.js.annotation.JSImport

@JSImport("foo", JSImport.Namespace)
@js.native
object foo extends js.Object {
  // here write the type signature of the fields exported by the `foo` module
}
~~~

Then you can publish your Scala.js project as usual.

Finally, to use the facade from another Scala.js project, this one needs to add a dependency on the facade, but it also
has to include the `sbt-scalajs-bundler` plugin.

> {.warning}
> Projects that **use** the facade also have to enable the `ScalaJSBundlerPlugin` plugin,
> otherwise the dependencies of the facade will not be resolved.
